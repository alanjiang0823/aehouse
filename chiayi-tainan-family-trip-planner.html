<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å˜‰å—è¦ªå­æ¨‚éŠ | 4å¤©3å¤œå®¢è£½åŒ–è¡Œç¨‹ (V9)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .nav-link {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #D97706; /* amber-600 */
            border-bottom-color: #D97706;
        }
        .tab-btn.active {
            background-color: #D97706; /* amber-600 */
            color: #FFFFFF;
        }
        .filter-btn.active {
            background-color: #EA580C; /* orange-600 */
            color: #FFFFFF;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 12px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: #FBBF24; /* amber-400 */
            border: 3px solid #FFFFFF;
        }
        /* Chart container styles are kept but the section is removed */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body class="bg-[#FDFBF8]">

    <header id="header" class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <a href="#" class="text-2xl font-bold text-amber-600">å˜‰å—è¦ªå­æ¨‚éŠ</a>
                </div>
                <div class="hidden lg:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#overview" class="nav-link px-3 py-2 rounded-md text-sm font-medium">è¡Œç¨‹ç¸½è¦½</a>
                        <a href="#daily-itinerary" class="nav-link px-3 py-2 rounded-md text-sm font-medium">æ¯æ—¥è¡Œç¨‹</a>
                        <a href="#food-map" class="nav-link px-3 py-2 rounded-md text-sm font-medium">ç¾é£Ÿåœ°åœ–</a>
                        <a href="#souvenirs" class="nav-link px-3 py-2 rounded-md text-sm font-medium">ç†±é–€ä¼´æ‰‹ç¦®</a>
                        <a href="#new-attractions" class="nav-link px-3 py-2 rounded-md text-sm font-medium">ç†±é–€æ™¯é»</a>
                        <a href="#preparation" class="nav-link px-3 py-2 rounded-md text-sm font-medium">è¡Œå‰æº–å‚™</a>
                    </div>
                </div>
                <div class="lg:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-amber-600 hover:bg-gray-100 focus:outline-none">
                        <span class="sr-only">Open main menu</span>
                        <span class="text-2xl">â˜°</span>
                    </button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="lg:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#overview" class="nav-link block px-3 py-2 rounded-md text-base font-medium">è¡Œç¨‹ç¸½è¦½</a>
                <a href="#daily-itinerary" class="nav-link block px-3 py-2 rounded-md text-base font-medium">æ¯æ—¥è¡Œç¨‹</a>
                <a href="#food-map" class="nav-link block px-3 py-2 rounded-md text-base font-medium">ç¾é£Ÿåœ°åœ–</a>
                <a href="#souvenirs" class="nav-link block px-3 py-2 rounded-md text-base font-medium">ç†±é–€ä¼´æ‰‹ç¦®</a>
                <a href="#new-attractions" class="nav-link block px-3 py-2 rounded-md text-base font-medium">ç†±é–€æ™¯é»</a>
                <a href="#preparation" class="nav-link block px-3 py-2 rounded-md text-base font-medium">è¡Œå‰æº–å‚™</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <section id="overview" class="scroll-mt-20 mb-16">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-orange-600 mb-4">å˜‰ç¾©å°å—4å¤©3å¤œè¦ªå­ä¹‹æ—…</h1>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto">ä¸€è¶Ÿå°ˆç‚ºæ‚¨èˆ‡5æ­²å­©å­è¨­è¨ˆçš„æ‚ é–’æ¢ç´¢ä¹‹æ—…ï¼Œçµåˆè‡ªç„¶ã€æ–‡åŒ–èˆ‡ç¾é£Ÿï¼Œå‰µé€ é›£å¿˜çš„å¤æ—¥å®¶åº­å›æ†¶ã€‚</p>
            </div>
        </section>

        <section id="daily-itinerary" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-2 text-orange-600">æ¯æ—¥è¡Œç¨‹</h2>
            <p class="text-center text-gray-600 mb-8">ä»¥æ™‚é–“è»¸å‘ˆç¾æ¯æ—¥çš„ç²¾å½©æ´»å‹•ï¼Œé»æ“Šåœ°åœ–åœ–ç¤ºå³å¯é–‹å•ŸGoogle Mapså°èˆªã€‚ä¸‹æ–¹ä¹Ÿæä¾›äº†æ¯æ—¥å¤©æ°£é æ¸¬ä¾›æ‚¨åƒè€ƒã€‚</p>
            <div id="tabs-container" class="flex justify-center mb-6 space-x-2 md:space-x-4 bg-amber-100/50 p-2 rounded-full">
                <button data-day="day1" class="tab-btn active px-4 py-2 text-sm md:text-base font-semibold text-amber-800 rounded-full transition-colors duration-300">Day 1 å˜‰ç¾©</button>
                <button data-day="day2" class="tab-btn px-4 py-2 text-sm md:text-base font-semibold text-amber-800 rounded-full transition-colors duration-300">Day 2 å°å—</button>
                <button data-day="day3" class="tab-btn px-4 py-2 text-sm md:text-base font-semibold text-amber-800 rounded-full transition-colors duration-300">Day 3 å°å—</button>
                <button data-day="day4" class="tab-btn px-4 py-2 text-sm md:text-base font-semibold text-amber-800 rounded-full transition-colors duration-300">Day 4 è¿”ç¨‹</button>
            </div>
            <div id="itinerary-content"></div>
        </section>

        <section id="food-map" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-2 text-orange-600">ç¾é£Ÿåœ°åœ–</h2>
            <p class="text-center text-gray-600 mb-8">ç‚ºæ‚¨ç²¾é¸å˜‰ç¾©èˆ‡å°å—çš„é«˜è©•åƒ¹åœ¨åœ°ç¾é£Ÿï¼Œé»æ“ŠæŒ‰éˆ•ç¯©é¸æ‚¨æƒ³åƒçš„é¡åˆ¥ï¼</p>
            <div id="food-filters" class="flex flex-wrap justify-center gap-2 mb-8"></div>
            <div id="food-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </section>

        <section id="souvenirs" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-orange-600">ç†±é–€ä¼´æ‰‹ç¦®ç²¾é¸</h2>
            <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4 text-amber-700 border-l-4 border-amber-500 pl-4">å˜‰ç¾©åœ°å€</h3>
                <div id="souvenirs-chiayi" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>
            <div>
                <h3 class="text-2xl font-bold mb-4 text-amber-700 border-l-4 border-amber-500 pl-4">å°å—åœ°å€</h3>
                <div id="souvenirs-tainan" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>
        </section>

        <section id="new-attractions" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-orange-600">è¿‘æœŸç†±é–€æ™¯é»</h2>
            <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4 text-amber-700 border-l-4 border-amber-500 pl-4">å˜‰ç¾©åœ°å€</h3>
                <div id="attractions-chiayi" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>
            <div>
                <h3 class="text-2xl font-bold mb-4 text-amber-700 border-l-4 border-amber-500 pl-4">å°å—åœ°å€</h3>
                <div id="attractions-tainan" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>
        </section>

        <section id="preparation" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-orange-600">è¡Œå‰æº–å‚™æ¸…å–®</h2>
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-amber-700 mb-4">âœ… å¿…å‚™ç‰©å“</h3>
                    <ul id="checklist-essentials" class="space-y-3 text-gray-600"></ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-amber-700 mb-4">âœ… æ‰“åŒ…æŠ€å·§</h3>
                    <ul id="checklist-tips" class="space-y-3 text-gray-600"></ul>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="bg-gray-800 text-white mt-16">
        <div class="container mx-auto py-6 px-4 text-center">
            <p>ç¥æ‚¨æœ‰å€‹ç¾å¥½çš„è¦ªå­å‡æœŸï¼</p>
            <a href="#header" class="mt-2 inline-block text-amber-400 hover:text-amber-300 transition-colors">è¿”å›é ‚éƒ¨ â†‘</a>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Itinerary data including dates and labels for each day
    const itineraryData = {
        day1: {
            date: '07/30',
            label: 'Day 1 å˜‰ç¾©',
            activities: [
                { time: '09:00-10:30', activity: 'å¾äº”å µå‡ºç™¼', details: 'æ²¿åœ‹é“1è™Ÿå—ä¸‹ï¼Œé–‹å•Ÿæ„‰å¿«çš„æ—…ç¨‹ã€‚', map: 'https://www.google.com/maps/dir/%E4%BA%94%E5%A0%B5/%E6%B3%B0%E5%AE%89%E6%9C%8D%E5%8B%99%E5%8D%80(%E5%8D%97%E4%B8%8B)/@24.770932,120.730872,9z' },
                { time: '10:30-11:30', activity: 'æ³°å®‰æœå‹™å€ (å—ä¸‹) ä¼‘æ¯', details: 'åœ¨è¦ªå­ä¸»é¡Œå€è®“å­©å­æ´»å‹•ä¸€ä¸‹ç­‹éª¨ï¼Œèˆ’ç·©é•·é€”è»Šçš„ç–²æ†Šã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æ³°å®‰æœå‹™å€å—ä¸‹' },
                { time: '13:00-14:00', activity: 'åˆé¤ï¼šåŠ‰é‡Œé•·ç«é›è‚‰é£¯ (4.2â˜…)', details: 'å“åšå˜‰ç¾©æœ€ç¶“å…¸çš„åœ¨åœ°ç¾å‘³ï¼Œå£å‘³å¤§çœ¾åŒ–ï¼Œé©åˆå…¨å®¶å¤§å°ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=åŠ‰é‡Œé•·ç«é›è‚‰é£¯å˜‰ç¾©å¸‚æ±å€å…¬æ˜è·¯197è™Ÿ' },
                { time: '14:00-16:00', activity: 'KHTOYçµ¨æ¯›ç©å¶æ——è‰¦é¤¨ (4.8â˜…)', details: 'å…¨å°æœ€å¤§çµ¨æ¯›ç©å¶æ——è‰¦é¤¨ï¼Œæ“æœ‰è¿ªå£«å°¼ã€ä¸‰éº—é·—ç­‰æ­£ç‰ˆæˆæ¬Šç©å¶ï¼Œæœ‰å¤šæ¨£æ‹ç…§å ´æ™¯èˆ‡å…è²»åœè»Šå ´ï¼Œæ˜¯å°æœ‹å‹çš„å¤©å ‚ã€‚', map: 'https://maps.app.goo.gl/iouqf8N3xY9XHHLw7' },
                { time: '16:00-17:30', activity: 'å…¥ä½å¤©æˆæ–‡æ—…-ç¹ªæ—¥ä¹‹ä¸˜ (4.3â˜…)', details: 'è¾¦ç†å…¥ä½ï¼Œé«”é©—é£¯åº—ç¨ç‰¹çš„è¦ªå­è¨­æ–½ï¼Œå¦‚æ˜Ÿç©ºç«¥æ¨‚å®¤ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å¤©æˆæ–‡æ—…-ç¹ªæ—¥ä¹‹ä¸˜' },
                { time: '17:30-19:00', activity: 'å˜‰ç¾©å¸‚ç«‹åšç‰©é¤¨ (4.4â˜…)', details: 'å…’ç«¥å»³å……æ»¿äº’å‹•éŠæˆ²ï¼Œæ˜¯å­©å­çš„å°ˆå±¬å±•å»³ï¼Œè¨˜å¾—è¦ç©¿è¥ªå­å–”ï¼', map: 'https://www.google.com/maps/search/?api=1&query=å˜‰ç¾©å¸‚ç«‹åšç‰©é¤¨' },
                { time: '19:00-20:30', activity: 'æ™šé¤ï¼šå…«è°· è±¬æ’ å’–å“© æ–‡é›…åº— (4.6â˜…)', details: 'é›¢é£¯åº—å¾ˆè¿‘çš„è±¬æ’å®šé£Ÿï¼Œåœè»Šå¯åœåœ¨æ–‡é›…åœ‹å°é™„è¿‘çš„åœè»Šæ ¼ï¼Œæˆ–å…¨å®¶ä¾¿åˆ©å•†åº—æ—æœ‰ä»˜è²»åœè»Šå ´', map: 'https://maps.app.goo.gl/195s7KhBBoCt5j2o9' },
            ]
        },
        day2: {
            date: '07/31',
            label: 'Day 2 å°å—',
            activities: [
                { time: '09:30-10:30', activity: 'å‰å¾€ä¸ƒè‚¡é¹½å±±', details: 'å¾å˜‰ç¾©å‡ºç™¼ï¼Œå‰å¾€å°å—çš„ç™½è‰²ç«¥è©±ä¸–ç•Œã€‚', map: 'https://www.google.com/maps/dir/å¤©æˆæ–‡æ—…-ç¹ªæ—¥ä¹‹ä¸˜/ä¸ƒè‚¡é¹½å±±/@23.323896,120.109102,10z' },
                { time: '10:30-12:30', activity: 'ä¸ƒè‚¡é¹½å±± (4.1â˜…)', details: 'æ”€ç™»ç¨ç‰¹çš„é¹½å±±ï¼Œæ­ä¹˜éŠåœ’å°ç«è»Šï¼Œäº«å—é¹½ç”°é¢¨å…‰ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=ä¸ƒè‚¡é¹½å±±' },
                { time: '12:30-14:00', activity: 'åˆé¤ï¼šæ–‡ç« ç‰›è‚‰æ¹¯ (4.4â˜…)', details: 'å“åšå°å—å¿…åƒçš„æº«é«”ç‰›è‚‰æ¹¯ï¼Œé«”é©—åºœåŸé®®ç”œæ»‹å‘³ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æ–‡ç« ç‰›è‚‰æ¹¯å°å—å¸‚å®‰å¹³å€å®‰å¹³è·¯300è™Ÿ' },
                { time: '14:00-17:00', activity: 'åé¼“ä»ç³–æ–‡å‰µåœ’å€ (4.5â˜…)', details: 'æ¬£è³éœ‡æ’¼çš„é¼“æ¨‚è¡¨æ¼”ï¼Œé«”é©—åˆºæ¿€çš„æ¥µé™è¨­æ–½èˆ‡æœ‰è¶£çš„è¦ªå­æ´»å‹•ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=åé¼“ä»ç³–æ–‡å‰µåœ’å€' },
                { time: '17:30-18:30', activity: 'å…¥ä½ç…™æ³¢å¤§é£¯åº—å°å—é¤¨ (4.5â˜…)', details: 'è¾¦ç†å…¥ä½å¾Œï¼Œå¯å¸¶å­©å­åˆ°éœ²å¤©æ³³æ± ç©æ°´æ¶ˆæš‘ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=ç…™æ³¢å¤§é£¯åº—å°å—é¤¨' },
                { time: '18:30-20:00', activity: 'æ™šé¤ï¼šå’•åš•å®¶åº­æ–™ç†é¤¨ (4.3â˜…)', details: 'è¦ªå­å‹å–„çš„å®¶å¸¸èœé¤å»³ï¼Œä»½é‡åè¶³ï¼Œç¾å‘³å¯å£ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å’•åš•å®¶åº­æ–™ç†é¤¨å°å—å¸‚ä¸­è¥¿å€æ…¶ä¸­è¡—12è™Ÿ' },
            ]
        },
        day3: {
            date: '08/01',
            label: 'Day 3 å°å—',
            activities: [
                { time: '10:00-12:30', activity: 'æ¨¹è°·ç”Ÿæ´»ç§‘å­¸é¤¨ (4.4â˜…)', details: 'çµåˆè‡ªç„¶å²ã€ç§‘å­¸èˆ‡æ–‡åŒ–ï¼Œæ“æœ‰è±å¯Œçš„äº’å‹•å¼å±•è¦½å’Œæé¾åŒ–çŸ³ï¼Œé©åˆå®¤å…§æ¢ç´¢ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æ¨¹è°·ç”Ÿæ´»ç§‘å­¸é¤¨å°å—å¸‚æ–°å¸‚å€ä¸­å¿ƒæ±è·¯12è™Ÿ' },
                { time: '12:30-14:00', activity: 'åˆé¤ï¼šå—ç´¡å‘¨é‚Šæˆ–å°å—åœ¨åœ°ç¾é£Ÿ', details: 'å¯é¸æ“‡ç§‘å­¸é¤¨å‘¨é‚Šé¤å»³æˆ–å‰å¾€å°å—å¸‚å€å“åšå°åƒã€‚', map: 'https://www.google.com/maps/search/?api=1&query=é¤Šé‹Yang+GuoçŸ³é ­æ¶®æ¶®é‹å°å—æ–‡åŒ–åº—' },
                { time: '14:00-17:00', activity: 'å¥‡ç¾åšç‰©é¤¨ (4.7â˜…)', details: 'è±å¯Œçš„è—è¡“æ”¶è—èˆ‡å¯¬å»£çš„æˆ¶å¤–åœ’å€ï¼Œ7æ­²ä»¥ä¸‹å…’ç«¥å…è²»å…¥å ´ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å¥‡ç¾åšç‰©é¤¨' },
                { time: '17:30-19:00', activity: 'æ™šé¤ï¼šåœ‹è¯è¡—ç¾é£Ÿæ¢ç´¢', details: 'å¯å˜—è©¦é‡‘å¾—æ˜¥æ²ã€çŸ³ç²¾è‡¼èšµä»”ç…ç­‰åœ‹è¯è¡—çŸ¥åå°åƒã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å°å—åœ‹è¯è¡—' },
            ]
        },
        day4: {
            date: '08/02',
            label: 'Day 4 è¿”ç¨‹',
            activities: [
                { time: '10:00-11:30', activity: 'å››è‰ç¶ è‰²éš§é“ (4.4â˜…)', details: 'æ­ä¹˜ç«¹ç­é«”é©—å°ç‰ˆäºé¦¬éœæ²³ï¼Œæ¬£è³ç´…æ¨¹æ—ç”Ÿæ…‹ï¼Œèˆªç¨‹ç´„30åˆ†é˜ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å››è‰ç¶ è‰²éš§é“' },
                { time: '11:30-12:30', activity: 'åˆé¤ï¼šå¯Œç››è™Ÿç¢—ç²¿ (4.1â˜…)', details: 'å“åšå°å—ç¶“å…¸ç¢—ç²¿ï¼Œç‚ºé€™è¶Ÿç¾é£Ÿä¹‹æ—…åŠƒä¸‹å®Œç¾å¥é»ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å¯Œç››è™Ÿç¢—ç²¿å°å—å¸‚æ°‘æ—è·¯ä¸‰æ®µ11è™Ÿ' },
                { time: '12:30-14:30', activity: 'å¾å°å—å‡ºç™¼åŒ—ä¸Š', details: 'å¸¶è‘—æ»¿æ»¿çš„å›æ†¶ï¼Œæº–å‚™è¿”å›æº«æš–çš„å®¶ã€‚', map: 'https://www.google.com/maps/dir/å°å—å¸‚/æ³°å®‰æœå‹™å€/@23.631024,120.274193,9z' },
                { time: '14:30-15:30', activity: 'æ³°å®‰æœå‹™å€ (åŒ—ä¸Š) ä¼‘æ¯', details: 'åœ¨å›ç¨‹ä¸­é€”ç¨ä½œä¼‘æ¯ï¼Œè£œå……é«”åŠ›ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æ³°å®‰æœå‹™å€åŒ—ä¸Š' },
                { time: '17:00', activity: 'æŠµé”äº”å µ', details: 'å¹³å®‰åˆ°å®¶ï¼ŒæœŸå¾…ä¸‹ä¸€æ¬¡çš„æ—…è¡Œï¼', map: 'https://www.google.com/maps/dir/æ³°å®‰æœå‹™å€/äº”å µ/@24.770932,120.730872,9z' },
            ]
        }
    };

    // Placeholder weather data for each day (since real-time API calls are not possible here)
    const dailyWeather = {
        day1: 'é™°é™£é›¨æˆ–é›·é›¨ï¼Œé ˆæ³¨æ„æ·¹æ°´åœ°å€',
        day2: 'é™°é™£é›¨æˆ–é›·é›¨ï¼Œé ˆæ³¨æ„æ·¹æ°´åœ°å€',
        day3: 'é™°é™£é›¨æˆ–é›·é›¨ï¼Œé ˆæ³¨æ„æ·¹æ°´åœ°å€',
        day4: 'é™°é™£é›¨æˆ–é›·é›¨ï¼Œé ˆæ³¨æ„æ·¹æ°´åœ°å€'
    };

    // Food data for the food map section
    const foodData = [
        { name: 'åŠ‰é‡Œé•·ç«é›è‚‰é£¯', city: 'å˜‰ç¾©', rating: '4.2â˜…', category: 'chiayi-main', map: 'https://www.google.com/maps/search/?api=1&query=åŠ‰é‡Œé•·ç«é›è‚‰é£¯å˜‰ç¾©å¸‚æ±å€å…¬æ˜è·¯197è™Ÿ', desc: 'å˜‰ç¾©ç¶“å…¸è€åº—ï¼Œå£å‘³å¤§çœ¾åŒ–ï¼Œé©åˆå…¨å®¶å“åšã€‚' },
        { name: 'æ—è°æ˜æ²™é‹é­šé ­', city: 'å˜‰ç¾©', rating: '4.1â˜…', category: 'chiayi-main', map: 'https://www.google.com/maps/search/?api=1&query=æ—è°æ˜æ²™é‹é­šé ­å˜‰ç¾©å¸‚æ±å€ä¸­æ­£è·¯361è™Ÿ', desc: 'å¿…åƒæ’éšŠç¾é£Ÿï¼Œæ¹¯é ­æ¿ƒéƒï¼Œé­šè‚‰é®®ç¾ã€‚' },
        { name: 'æºèˆˆå¾¡é¦™å±‹', city: 'å˜‰ç¾©', rating: '4.4â˜…', category: 'chiayi-drink', map: 'https://www.google.com/maps/search/?api=1&query=æºèˆˆå¾¡é¦™å±‹', desc: 'è¶…äººæ°£è‘¡è„æŸšç¶ èŒ¶ï¼Œå¤æ—¥æ¶ˆæš‘è–å“ã€‚' },
        { name: 'é˜¿å©†çƒ¤ç‰ç±³', city: 'å˜‰ç¾©', rating: '4.5â˜…', category: 'chiayi-snack', map: 'https://www.google.com/maps/search/?api=1&query=é˜¿å©†çƒ¤ç‰ç±³å˜‰ç¾©å¸‚æ±å€æ°‘æ—è·¯312è™Ÿ', desc: 'åœ¨åœ°äººæ¨è–¦çš„ç‚­çƒ¤ç³¯ç±³ç‰ç±³ï¼Œé†¬æ–™ç¨ç‰¹ã€‚' },
        { name: 'éº¥ç•¶å‹-å˜‰ç¾©åŒ—æ¸¯é¤å»³ï¼è¨­æœ‰å¾—ä¾†é€Ÿ', city: 'å˜‰ç¾©', rating: '4.5â˜…', category: 'chiayi-main', map: 'https://maps.app.goo.gl/iAPSUA4AADyD7Zaz6', desc: 'å°±...éº¥ç•¶å‹' },
        { name: 'é‡èµ¤ç‡’è‚‰', city: 'å˜‰ç¾©', rating: '4.7â˜…', category: 'chiayi-main', map: 'https://maps.app.goo.gl/6pc4se44BFh2cezm9', desc: 'é‡èµ¤ç‡’è‚‰ï½œ500å…ƒç‡’è‚‰åƒåˆ°é£½â€¢ç‚­ç«ç‡’çƒ¤æ¥µè‡´äº«å—ï¼' },
        { name: 'æ–‡ç« ç‰›è‚‰æ¹¯', city: 'å°å—', rating: '4.4â˜…', category: 'tainan-main', map: 'https://www.google.com/maps/search/?api=1&query=æ–‡ç« ç‰›è‚‰æ¹¯å°å—å¸‚å®‰å¹³å€å®‰å¹³è·¯300è™Ÿ', desc: 'å°å—ç‰›è‚‰æ¹¯æŒ‡æ¨™ååº—ï¼Œæ¹¯é ­é®®ç¾ï¼Œè‚‰è³ªè»Ÿå«©ã€‚' },
        { name: 'å¯Œç››è™Ÿç¢—ç²¿', city: 'å°å—', rating: '4.1â˜…', category: 'tainan-snack', map: 'https://www.google.com/maps/search/?api=1&query=å¯Œç››è™Ÿç¢—ç²¿å°å—å¸‚æ°‘æ—è·¯ä¸‰æ®µ11è™Ÿ', desc: 'ç¶“å…¸å¤æ—©å‘³ï¼ŒQå½ˆç¢—ç²¿æ­é…è±å¯Œå…§é¤¡ã€‚' },
        { name: 'å’•åš•å®¶åº­æ–™ç†é¤¨', city: 'å°å—', rating: '4.3â˜…', category: 'tainan-family', map: 'https://www.google.com/maps/search/?api=1&query=å’•åš•å®¶åº­æ–™ç†é¤¨å°å—å¸‚ä¸­è¥¿å€æ…¶ä¸­è¡—12è™Ÿ', desc: 'åœ¨åœ°äººæ¨è–¦çš„è¦ªå­å‹å–„é¤å»³ï¼Œä»½é‡åè¶³ï¼Œç¾å‘³å¯å£ã€‚' },
        { name: 'é‡‘å¾—æ˜¥æ²', city: 'å°å—', rating: '4.2â˜…', category: 'tainan-snack', map: 'https://www.google.com/maps/search/?api=1&query=é‡‘å¾—æ˜¥æ²å°å—å¸‚ä¸­è¥¿å€æ°‘æ—è·¯ä¸‰æ®µ19è™Ÿ', desc: 'åœ‹è¯è¡—äººæ°£ååº—ï¼Œç”¨æ–™å¯¦åœ¨ï¼Œç”œåº¦å¯èª¿æ•´ã€‚' },
    ];
    const foodFilters = [
        { key: 'all', name: 'å…¨éƒ¨' },
        { key: 'chiayi-main', name: 'å˜‰ç¾©ä¸»é£Ÿ' },
        { key: 'chiayi-snack', name: 'å˜‰ç¾©å°åƒ' },
        { key: 'chiayi-drink', name: 'å˜‰ç¾©é£²å“' },
        { key: 'tainan-main', name: 'å°å—ä¸»é£Ÿ' },
        { key: 'tainan-snack', name: 'å°å—å°åƒ' },
        { key: 'tainan-family', name: 'å°å—é¤å»³' },
    ];

    // Checklist data for preparation section
    const checklistData = {
        essentials: [
            "è¼•ä¾¿é€æ°£è¡£ç‰© (å¤šå‚™ä¸€å¥—)", "é˜²æ›¬ä¹³ã€é®é™½å¸½ã€å¤ªé™½çœ¼é¡", "è¼•ä¾¿é›¨è¡£æˆ–æŠ˜ç–Šå‚˜",
            "å€‹äººå¸¸å‚™è—¥å“èˆ‡æ€¥æ•‘åŒ…", "é˜²èšŠæ¶²æˆ–é˜²èšŠè²¼ç‰‡", "å­©ç«¥å°ˆç”¨å®‰å…¨åº§æ¤…",
            "æ‰‹æ©Ÿã€å……é›»å™¨ã€è¡Œå‹•é›»æº", "å¥ä¿å¡ã€èº«åˆ†è­‰ä»¶", "å­©ç«¥å°ˆç”¨å®‰æ’«ç©å…·æˆ–ç¹ªæœ¬",
            "è¥ªå­ (å¤šå€‹å®¤å…§æ™¯é»éœ€è¦)"
        ],
        tips: [
            "ä½¿ç”¨æ”¶ç´è¢‹åˆ†é¡æ‰“åŒ…ï¼Œæ–¹ä¾¿æ‹¿å–ã€‚", "å¯å°‡å­©å­æ¯æ—¥ç©¿æ­åˆ†è£æˆè¢‹ã€‚",
            "éš¨èº«åŒ…æº–å‚™å°‘é‡æ‡‰æ€¥ç‰©å“ã€‚", "é‡è¦è­‰ä»¶æ‹ç…§å‚™ä»½å­˜æ–¼é›²ç«¯ã€‚",
            "å–„ç”¨é£¯åº—è¨­æ–½ï¼Œè®“å­©å­å……åˆ†æ”¾é›»ã€‚", "è¡Œç¨‹ä¿æŒå½ˆæ€§ï¼Œä¾å­©å­ç‹€æ³èª¿æ•´ã€‚"
        ]
    };
    
    // Souvenirs data for both cities
    const souvenirsData = {
        chiayi: [
            { name: 'æ—ºèŠå±±é³³æ¢¨é…¥', rating: '4.2â˜…', desc: 'ä½¿ç”¨åœ¨åœ°æ–°é®®é³³æ¢¨è£½ä½œï¼Œé¦™æ°£æ¿ƒéƒï¼Œæ˜¯çµåˆè§€å…‰å·¥å» çš„ä»£è¡¨æ€§ä¼´æ‰‹ç¦®ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æ—ºèŠå±±é³³æ¢¨æ–‡åŒ–åœ’å€' },
            { name: 'è€æ¥Šæ–¹å¡Šé…¥', rating: '4.2â˜…', desc: 'å˜‰ç¾©å‚³çµ±é»å¿ƒï¼Œè§€å…‰å·¥å» çµåˆå·¨å‹æ©Ÿå™¨äººå½©ç¹ªï¼Œå¥½åƒåˆå¥½ç©ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=è€æ¥Šæ–¹åŸå¸‚è§€å…‰å·¥å» ' },
            { name: 'æºèˆˆå¾¡é¦™å±‹', rating: '4.4â˜…', desc: 'è¶…äººæ°£æ‰‹æ–é£²ï¼Œæ‹›ç‰Œè‘¡è„æŸšç¶ èŒ¶æ˜¯å¿…é»ç¾å‘³ï¼Œå¸¸éœ€æ’éšŠç­‰å€™ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æºèˆˆå¾¡é¦™å±‹' }
        ],
        tainan: [
            { name: 'é‡‘æ¡ƒå®¶è‰è“å¤§ç¦', rating: '4.8â˜…', desc: 'å°å—è¶…æ¶æ‰‹çš„éš±è—ç‰ˆç¾é£Ÿï¼Œä»¥å…¶é«˜å“è³ªèˆ‡é™é‡ä¾›æ‡‰èåï¼Œå»ºè­°ææ—©é è¨‚ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=é‡‘æ¡ƒå®¶è‰è“å¤§ç¦' },
            { name: 'å¥‡ç¾é£Ÿå“å¹¸ç¦å·¥å» ', rating: '4.2â˜…', desc: 'çµåˆè§€å…‰èˆ‡ç¾é£Ÿï¼Œæä¾›å¤šæ¨£åŒ–é£Ÿå“ä¼´æ‰‹ç¦®ï¼Œé‚„å¯é«”é©—DIYæ´»å‹•ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å¥‡ç¾é£Ÿå“å¹¸ç¦å·¥å» ' },
            { name: 'é€£å¾—å ‚é¤…å®¶', rating: '4.3â˜…', desc: 'ç™¾å¹´æ‰‹å·¥ç…é¤…è€åº—ï¼Œæ¯æ—¥é™é‡è²©å”®ï¼Œå……æ»¿æ¿ƒæ¿ƒå¤æ—©å‘³ï¼Œæ˜¯å°å—ä»£è¡¨æ€§ä¼´æ‰‹ç¦®ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=é€£å¾—å ‚é¤…å®¶' }
        ]
    };

    // Attractions data for both cities - UPDATED
    const attractionsData = {
        chiayi: [
            { name: 'KANOåœ’å€éŠæˆ²å ´', rating: '4.5â˜…', desc: 'å…è²»é–‹æ”¾çš„ç‰¹è‰²å…¬åœ’ï¼Œæ“æœ‰è¶…å¯¬ç‰ˆç£¨çŸ³å­æºœæ»‘æ¢¯å’Œæ»‘è‰å ´ï¼Œæ˜¯å­©å­æ”¾é›»å¤©å ‚ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=KANOåœ’å€éŠæˆ²å ´å˜‰ç¾©å¸‚æ±å€å±±ä»”é ‚249-1è™Ÿ' },
            { name: 'è˜­æ½­é¢¨æ™¯å€', rating: '4.3â˜…', desc: 'å¤œæ™šå¯æ¬£è³å…è²»çš„æ°´èˆç‡ˆå…‰ç§€ï¼Œæ­é…ã€Œæœˆå½±æ½­å¿ƒã€è£ç½®è—è¡“ï¼Œæ˜¯ä¼‘é–’å¥½å»è™•ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=è˜­æ½­é¢¨æ™¯å€' },
            { name: 'æªœæ„æ£®æ´»æ‘', rating: '4.3â˜…', desc: 'æ—¥å¼å»ºç¯‰ç¾¤ï¼Œå……æ»¿æ–‡å‰µæ°£æ¯ï¼Œæä¾›å’Œæœé«”é©—ã€æ‰‹ä½œDIYã€ç‰¹è‰²å°åƒã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æªœæ„æ£®æ´»æ‘å˜‰ç¾©å¸‚æ±å€æ—æ£®æ±è·¯1è™Ÿ' },
            { name: 'æ²‰ç¡æ£®æ—ä¸»é¡Œå…¬åœ’', rating: '4.4â˜…', desc: 'ä»¥å¯æ„›å‹•ç‰©è£ç½®è—è¡“ç‚ºä¸»é¡Œçš„å…¬åœ’ï¼Œé©åˆæ•£æ­¥æ‹ç…§ï¼Œå……æ»¿ç«¥è¶£ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æ²‰ç¡æ£®æ—ä¸»é¡Œå…¬åœ’å˜‰ç¾©å¸‚æ±å€å…±å’Œè·¯239è™Ÿ' },
            { name: 'å˜‰ç¾©å¸‚ç«‹åšç‰©é¤¨', rating: '4.4â˜…', desc: 'å…’ç«¥å»³æœ‰è¿·å®®ã€çƒæ± ã€è€ƒå¤æ²™å‘èˆ‡äº’å‹•è¨­æ–½ï¼Œå…¨å°é¦–åº§è€ƒå¤å¯†å®¤ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å˜‰ç¾©å¸‚ç«‹åšç‰©é¤¨' },
            // New attractions for Chiayi
            { name: 'å˜‰ç¾©æ•…å®®å—é™¢', rating: '4.5â˜…', desc: 'åœ‹å®¶ç´šåšç‰©é¤¨ï¼Œè¨­æœ‰å…è²»å…’ç«¥å‰µæ„ä¸­å¿ƒï¼Œè±å¯Œçš„äº’å‹•é«”é©—ï¼Œæˆ¶å¤–åœ’å€å¯¬å»£ï¼Œé©åˆè¦ªå­åŠæ—¥éŠã€‚', map: 'https://maps.app.goo.gl/S1VFfowWVC7aHmpv6' },
            { name: 'KHTOYçµ¨æ¯›ç©å¶æ——è‰¦é¤¨', rating: '4.8â˜…', desc: 'å…¨å°æœ€å¤§çµ¨æ¯›ç©å¶æ——è‰¦é¤¨ï¼Œæ“æœ‰è¿ªå£«å°¼ã€ä¸‰éº—é·—ç­‰æ­£ç‰ˆæˆæ¬Šç©å¶ï¼Œæœ‰å¤šæ¨£æ‹ç…§å ´æ™¯èˆ‡å…è²»åœè»Šå ´ï¼Œæ˜¯å°æœ‹å‹çš„å¤©å ‚ã€‚', map: 'https://maps.app.goo.gl/VdoMGyazcUa12zds7' },
            { name: 'ä¸¸èšæ˜Ÿçƒ(Ball Planet)', rating: '4.8â˜…', desc: 'ä¸¸èšæ˜Ÿçƒå˜‰ç¾©ç¸£è§€å…‰å·¥å» ï¼Œä½æ–¼å˜‰ç¾©å¤§æ—é®å¤§åŸ”ç¾æ™ºæ…§å‹å·¥æ¥­åœ’å€ï¼Œç”±å˜‰æ¥ é£Ÿå“æ‰€é–‹è¨­ä»¥è²¢ä¸¸ç‚ºä¸»é¡Œçš„è§€å…‰å·¥å» ã€‚', map: 'https://maps.app.goo.gl/RkH9ejfFugjXqsrA6' }
        ],
        tainan: [
            { name: 'å¥‡ç¾åšç‰©é¤¨', rating: '4.7â˜…', desc: 'æ”¶è—è±å¯Œçš„ç¶œåˆæ€§åšç‰©é¤¨ï¼Œæˆ¶å¤–åœ’å€å»£é—Šï¼ŒARå¯¦å¢ƒéŠæˆ²å¢æ·»äº’å‹•æ¨‚è¶£ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å¥‡ç¾åšç‰©é¤¨' },
            { name: 'åé¼“ä»ç³–æ–‡å‰µåœ’å€', rating: '4.5â˜…', desc: 'çµåˆé¼“æ¨‚ã€æ¥µé™è¨­æ–½èˆ‡ç³–å» æ–‡åŒ–ï¼Œæä¾›å¾å¹¼å…’åˆ°æˆäººçš„å¤šå…ƒé«”é©—ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=åé¼“ä»ç³–æ–‡å‰µåœ’å€' },
            { name: 'å››è‰ç¶ è‰²éš§é“', rating: '4.4â˜…', desc: 'æ­ä¹˜ç«¹ç­é«”é©—ã€Œå°ç‰ˆäºé¦¬éœæ²³ã€ï¼Œæ¬£è³ç¨ç‰¹çš„ç´…æ¨¹æ—ç”Ÿæ…‹æ™¯è§€ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=å››è‰ç¶ è‰²éš§é“' },
            { name: 'ä¸ƒè‚¡é¹½å±±', rating: '4.1â˜…', desc: 'å°ç£ç¨ç‰¹çš„ç™½è‰²åœ°æ™¯ï¼Œæœ‰éŠåœ’å°ç«è»Šã€æ‘©å¤©è¼ªã€æ²™å‘ç­‰å…’ç«¥è¨­æ–½ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=ä¸ƒè‚¡é¹½å±±' },
            { name: 'æ¨¹è°·ç”Ÿæ´»ç§‘å­¸é¤¨', rating: '4.4â˜…', desc: 'çµåˆè‡ªç„¶å²ã€ç§‘å­¸èˆ‡æ–‡åŒ–ï¼Œæ“æœ‰è±å¯Œçš„äº’å‹•å¼å±•è¦½å’Œæé¾åŒ–çŸ³ï¼Œé©åˆå®¤å…§æ¢ç´¢ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=æ¨¹è°·ç”Ÿæ´»ç§‘å­¸é¤¨å°å—å¸‚æ–°å¸‚å€ä¸­å¿ƒæ±è·¯12è™Ÿ' },
            { name: 'åœ‹ç«‹è‡ºç£æ­·å²åšç‰©é¤¨', rating: '4.4â˜…', desc: 'åœ‹å®¶ç´šæ­·å²åšç‰©é¤¨ï¼Œè¨­æœ‰å…’ç«¥å»³ï¼Œæä¾›è±å¯Œçš„æ­·å²æ–‡åŒ–æ•™è‚²ã€‚', map: 'https://www.google.com/maps/search/?api=1&query=åœ‹ç«‹è‡ºç£æ­·å²åšç‰©é¤¨' },
            // New attractions for Tainan
            { name: 'å·¦é®åŒ–çŸ³åœ’å€', rating: '4.3â˜…', desc: 'å…¨å°å”¯ä¸€çš„åŒ–çŸ³ä¸»é¡Œåœ’å€ï¼Œçµåˆè€ƒå¤ã€ç§‘å­¸èˆ‡æ•™è‚²ï¼Œå¤šåª’é«”äº’å‹•å±•è¦½èˆ‡æˆ¶å¤–æŒ–æ˜é«”é©—ï¼Œå¯“æ•™æ–¼æ¨‚ã€‚', map: 'https://maps.app.goo.gl/RqJgRtdnocr67ikL6' },
            { name: 'éš†ç”°CHA CHA æ–‡åŒ–è³‡ç”¢æ•™è‚²åœ’å€', rating: '4.5â˜…', desc: 'çµåˆå˜‰å—å¤§åœ³ã€è€ƒå¤èˆ‡éµé“æ–‡åŒ–ï¼Œæ“æœ‰å·¨å‹å½ˆç å°ã€æ²‰æµ¸å¼åŠ‡å ´ç­‰å¤šé …äº’å‹•è¨­æ–½ï¼Œå®¤å…§ç©ºé–“é©åˆé›¨å¤©å‚™æ¡ˆã€‚', map: 'https://maps.app.goo.gl/HFfPcpFzjKnUtaNu7' }
        ]
    };

    // Get references to the HTML elements
    const itineraryContent = document.getElementById('itinerary-content');
    const foodGrid = document.getElementById('food-grid');
    const foodFiltersContainer = document.getElementById('food-filters');
    const checklistEssentials = document.getElementById('checklist-essentials');
    const checklistTips = document.getElementById('checklist-tips');
    const souvenirsChiayi = document.getElementById('souvenirs-chiayi');
    const souvenirsTainan = document.getElementById('souvenirs-tainan');
    const attractionsChiayi = document.getElementById('attractions-chiayi');
    const attractionsTainan = document.getElementById('attractions-tainan');

    /**
     * Creates the HTML for the daily itinerary timeline.
     * @param {object} dayData - The data for the specific day (date, label, activities).
     * @param {string} dayKey - The key for the day (e.g., 'day1', 'day2').
     * @returns {string} The HTML string for the timeline.
     */
    function createTimelineHTML(dayData, dayKey) {
        const weatherInfo = dailyWeather[dayKey] || 'å¤©æ°£è³‡è¨Šå¾…æ›´æ–°'; // Get weather for the day
        return `
            <div class="text-center mb-6">
                <p class="text-2xl font-bold text-orange-600">${dayData.date}</p>
                <h3 class="text-xl font-semibold text-gray-800">${dayData.label}</h3>
            </div>
            <div class="relative border-l-2 border-amber-200 pl-8 py-4">
                <div class="bg-amber-50 p-3 rounded-lg shadow-sm mb-6 flex items-center">
                    <span class="text-xl mr-2">â˜€ï¸</span>
                    <p class="text-amber-800 font-semibold">ä»Šæ—¥å¤©æ°£é æ¸¬ï¼š${weatherInfo}</p>
                </div>
                ${dayData.activities.map(item => `
                    <div class="relative mb-8 timeline-item">
                        <div class="bg-white p-4 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300">
                            <p class="font-bold text-amber-600 mb-1">${item.time}</p>
                            <h4 class="text-lg font-semibold text-gray-800">${item.activity}</h4>
                            <p class="text-gray-500 text-sm mt-1">${item.details}</p>
                            <a href="${item.map}" target="_blank" rel="noopener noreferrer" class="absolute top-4 right-4 text-orange-500 hover:text-orange-700 text-2xl" title="åœ¨Google Mapsä¸­é–‹å•Ÿ">
                                ğŸ—ºï¸
                            </a>
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
    }
    
    /**
     * Renders the itinerary content for the selected day.
     * @param {string} dayKey - The key for the day to render (e.g., 'day1').
     */
    function renderItinerary(dayKey) {
        itineraryContent.innerHTML = createTimelineHTML(itineraryData[dayKey], dayKey);
    }

    // Event listener for tab buttons to switch daily itineraries
    document.getElementById('tabs-container').addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
            // Remove 'active' class from the currently active button
            document.querySelector('#tabs-container .active').classList.remove('active');
            // Add 'active' class to the clicked button
            e.target.classList.add('active');
            // Render the itinerary for the selected day
            renderItinerary(e.target.dataset.day);
        }
    });

    /**
     * Renders the filter buttons for the food map.
     */
    function renderFoodFilters() {
        foodFiltersContainer.innerHTML = foodFilters.map(filter => `
            <button data-filter="${filter.key}" class="filter-btn px-4 py-2 text-sm font-semibold border border-orange-500 text-orange-600 rounded-full transition-all duration-300 hover:bg-orange-500 hover:text-white ${filter.key === 'all' ? 'active' : ''}">
                ${filter.name}
            </button>
        `).join('');
    }

    /**
     * Renders the food grid based on the selected filter.
     * @param {string} filter - The filter key (e.g., 'all', 'chiayi-main').
     */
    function renderFoodGrid(filter = 'all') {
        const filteredData = filter === 'all' ? foodData : foodData.filter(item => {
            // Check if the item's category starts with the city part of the filter
            const cityMatch = item.category.startsWith(filter.split('-')[0]);
            // If the filter has a specific type (e.g., 'chiayi-main'), match the full category
            const typeMatch = filter.includes('-') ? item.category === filter : true;
            return cityMatch && typeMatch;
        });
        foodGrid.innerHTML = filteredData.map(item => `
            <div class="bg-white rounded-xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300">
                <div class="p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs font-semibold text-amber-600 uppercase">${item.city} | ${item.rating}</p>
                            <h4 class="text-xl font-bold text-gray-800 mt-1">${item.name}</h4>
                        </div>
                        <a href="${item.map}" target="_blank" rel="noopener noreferrer" class="absolute top-4 right-4 text-orange-500 hover:text-orange-700 text-2xl" title="åœ¨Google Mapsä¸­é–‹å•Ÿ">
                                ğŸ—ºï¸
                            </a>
                        <a href="${item.map}" target="_blank" rel="noopener noreferrer" class="text-orange-500 hover:text-orange-700 text-3xl ml-4" title="åœ¨Google Mapsä¸­é–‹å•Ÿ">
                            ğŸ—ºï¸
                        </a>
                    </div>
                    <p class="text-gray-600 mt-2 text-sm">${item.desc}</p>
                </div>
            </div>
        `).join('');
    }

    // Event listener for food filter buttons
    foodFiltersContainer.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
            document.querySelector('#food-filters .active').classList.remove('active');
            e.target.classList.add('active');
            renderFoodGrid(e.target.dataset.filter);
        }
    });
    
    /**
     * Renders the checklist items for essentials and tips.
     */
    function renderChecklists() {
        checklistEssentials.innerHTML = checklistData.essentials.map(item => `
            <li class="flex items-start">
                <span class="text-amber-500 mr-2 mt-1">ğŸ”¸</span>
                <span>${item}</span>
            </li>
        `).join('');
        checklistTips.innerHTML = checklistData.tips.map(item => `
            <li class="flex items-start">
                <span class="text-amber-500 mr-2 mt-1">ğŸ”¸</span>
                <span>${item}</span>
            </li>
        `).join('');
    }

    /**
     * Creates an HTML card for a given info item (souvenir or attraction).
     * @param {object} item - The item data (name, rating, desc, map).
     * @returns {string} The HTML string for the info card.
     */
    function createInfoCard(item) {
        return `
            <div class="bg-white rounded-xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300">
                <div class="p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs font-semibold text-amber-600 uppercase">${item.rating}</p>
                            <h4 class="text-xl font-bold text-gray-800 mt-1">${item.name}</h4>
                        </div>
                        <a href="${item.map}" target="_blank" rel="noopener noreferrer" class="text-orange-500 hover:text-orange-700 text-3xl ml-4" title="åœ¨Google Mapsä¸­é–‹å•Ÿ">
                            ğŸ—ºï¸
                        </a>
                    </div>
                    <p class="text-gray-600 mt-2 text-sm">${item.desc}</p>
                </div>
            </div>
        `;
    }

    /**
     * Renders the lists of souvenirs and attractions.
     */
    function renderInfoLists() {
        souvenirsChiayi.innerHTML = souvenirsData.chiayi.map(createInfoCard).join('');
        souvenirsTainan.innerHTML = souvenirsData.tainan.map(createInfoCard).join('');
        attractionsChiayi.innerHTML = attractionsData.chiayi.map(createInfoCard).join('');
        attractionsTainan.innerHTML = attractionsData.tainan.map(createInfoCard).join('');
    }

    // Mobile menu toggle functionality
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // Close mobile menu and scroll to section when a navigation link is clicked
    document.querySelectorAll('#mobile-menu .nav-link, header .nav-link').forEach(link => {
        link.addEventListener('click', (e) => {
            if (e.currentTarget.closest('#mobile-menu')) {
                mobileMenu.classList.add('hidden'); // Close mobile menu if clicked from there
            }
            if(link.getAttribute('href').startsWith('#')) {
                e.preventDefault(); // Prevent default anchor behavior
                const targetElement = document.querySelector(link.getAttribute('href'));
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' }); // Smooth scroll to section
                }
            }
        });
    });
    
    // Highlight active navigation link based on scroll position
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section');
    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            // Adjust offset to trigger active state slightly before section reaches top
            if (pageYOffset >= sectionTop - 80) {
                current = section.getAttribute('id');
            }
        });
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href').substring(1) === current) {
                link.classList.add('active');
            }
        });
    });

    // Initial rendering calls
    renderItinerary('day1'); // Render Day 1 itinerary by default
    renderFoodFilters(); // Render food filter buttons
    renderFoodGrid('all'); // Render all food items initially
    renderChecklists(); // Render preparation checklists
    renderInfoLists(); // Render souvenir and attraction lists
});
</script>

</body>
</html>
